<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Consequence of Imagination</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap');

    body {
      background: #111;
      margin: 0;
      height: 100vh;
      overflow: hidden;
      font-family: Arial, sans-serif;
      color: white;
      transition: background 1s ease;
    }

    .top-line {
        font-family: "Geist", sans-serif;
      position: absolute;
      top: 20px;
      width: 100%;
      text-align: center;
      font-size: 20px;
      letter-spacing: 1px;
      z-index: 10;
      opacity: 1;
      transition: opacity 1s ease;
    }

    .center-text {
        font-family: "Geist", sans-serif;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 500px;
      transform: translate(-50%, -50%);
      color: #ccc;
      transition: filter 0.3s ease, opacity 1s ease;
      filter: blur(10px);
      z-index: 5;
      opacity: 1;
    }

    h1 {
        display: block;
        margin: 0;
      font-size: 50px;
      letter-spacing: 0.2em;
      font-weight: 800;
      text-align: center;
    }

    h2 {
        display: block;
        margin: 0;
      font-size: 50px;
      letter-spacing: 0.2em;
      font-weight: 700;
      text-align: left;
    }

    h3 {
        display: block;
        margin: 0;
      font-size: 30px;
      letter-spacing: 0.2em;
      font-weight: 300;
      text-align: left;
    }

    .word-is {
        text-align: right;
        line-height: 2em;
    }

    .eyes-container {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
      transition: opacity 1s ease;
    }

    .eye-wrapper {
      position: absolute;
      width: 140px;
      height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: all;
    }

    .eye {
      width: 100px;
      height: 0;
      background: transparent;
      border-radius: 50% / 10%;
      position: relative;
      overflow: hidden;
      transition: height 0.4s ease, border-radius 0.4s ease, background 0.3s ease;
      cursor: pointer;
      opacity: 0;
    }

    .eye.open {
      height: 40px;
      background: white;
      border-radius: 50%;
      opacity: 1;
    }

    .iris {
      width: 40px;
      height: 40px;
      background: #8B0000;
      border-radius: 50%;
      position: absolute;
      top: 0px;
      left: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.4s ease, transform 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    }

    .eye.open .iris {
      opacity: 1;
    }

    .pupil {
      width: 20px;
      height: 20px;
      background: #ff4d4d;
      border-radius: 50%;
    }

    /* Special center eyes */
    .special-eyes {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      gap: 80px;
      opacity: 0;
      transition: opacity 1s ease;
      z-index: 20;
    }

    .special-eye-wrapper {
      width: 140px;
      height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .special-eye {
      width: 100px;
      height: 0;
      background: transparent;
      border-radius: 50% / 10%;
      position: relative;
      overflow: hidden;
      transition: height 0.8s ease 0.5s, border-radius 0.8s ease 0.5s, background 0.8s ease 0.5s;
    }

    .special-eye.open {
      height: 40px;
      background: white;
      border-radius: 50%;
    }

    .special-iris {
      width: 40px;
      height: 40px;
     
      position: absolute;
      top: 0px;
      left: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: height 0.6s ease 1.3s, opacity 0.6s ease 1.3s;
    }

    .special-eye.open .special-iris {
      height: 40px;
      opacity: 1;
    }

 

    .special-eye.open .special-iris {
      transform: scale(1);
    }

    .fade-out {
      opacity: 0;
    }

    .black-bg {
      background: #000;
    }
  </style>
</head>
<body>

  <div class="top-line">JUNIE & THEHUTFRIENDS</div>

  <div class="center-text" id="mainText">
      <h3>THE</h3>
      <h2>CONSEQUENCE</h2>
      <h3>OF</h3>
      <h2>IMAGINATION</h2>
      <h3 class="word-is">IS</h3>
      <h1>FEAR</h1>
  </div>

  <div class="eyes-container" id="eyesContainer"></div>

  <div class="special-eyes" id="specialEyes">
    <div class="special-eye-wrapper">
      <div class="special-eye">
        <a href="https://music.youtube.com/watch?v=B9iw2bUvv0Q&si=IeN63oxWF4oZap8Z">
        <img class="special-iris" src="/youtube-music.png";>
        </a>
        </div>
      </div>
   
    <div class="special-eye-wrapper">
      <div class="special-eye">
        <a href="https://open.spotify.com/track/7bDjBTYVaIDN1Fvsm26jQk?si=gXdU10DoT_eJj0vpfFUnDg">
        <img class="special-iris" src="/Spotify_icon.svg.png";>
        </a>
        </div>
      </div>
   
    <div class="special-eye-wrapper">
      <div class="special-eye">
        <a href="https://music.apple.com/us/album/the-consequence-of-imagination-is-fear-single/1637066649">
        <img class="special-iris" src="/apple-music.png";>
        </a>
        </div>
      </div>
    
  </div>


  <script>
    const container = document.getElementById('eyesContainer');
    const text = document.getElementById('mainText');
    const specialEyes = document.getElementById('specialEyes');
    const totalEyes = 30;
    let openedEyes = 0;
    const placedEyes = [];

    const eyeWidth = 140;
    const eyeHeight = 100;

    // Expanded no-eye zone
    const centerRect = {
      x: window.innerWidth / 2 - 320,
      y: window.innerHeight / 2 - 250,
      width: 640,
      height: 500
    };

    const topRect = {
      x: 0,
      y: 0,
      width: window.innerWidth,
      height: 60
    };

    function updateBlur() {
      const maxBlur = 10;
      const minBlur = 0;
      const blurValue = Math.max(minBlur, maxBlur - (openedEyes / totalEyes) * maxBlur);
      text.style.filter = `blur(${blurValue}px)`;
    }

    function intersects(rect1, rect2) {
      return !(
        rect1.x + rect1.width < rect2.x ||
        rect1.x > rect2.x + rect2.width ||
        rect1.y + rect1.height < rect2.y ||
        rect1.y > rect2.y + rect2.height
      );
    }

    const allEyes = [];

    function createEye(x, y) {
      const wrapper = document.createElement('div');
      wrapper.classList.add('eye-wrapper');
      wrapper.style.left = `${x}px`;
      wrapper.style.top = `${y}px`;

      const eye = document.createElement('div');
      eye.classList.add('eye');

      const iris = document.createElement('div');
      iris.classList.add('iris');

      const pupil = document.createElement('div');
      pupil.classList.add('pupil');

      iris.appendChild(pupil);
      eye.appendChild(iris);
      wrapper.appendChild(eye);
      container.appendChild(wrapper);

      // Save for tracking
      allEyes.push({ iris, pupil, wrapper });

      wrapper.addEventListener('mouseenter', () => {
        if (!eye.classList.contains('open')) {
          eye.classList.add('open');
          openedEyes++;
          updateBlur();

          if (openedEyes === totalEyes) {
            // Add delay before eyes look at center
            setTimeout(lookAtCenter, 1500);
          }
        }
      });
    }

    function generateEyes() {
      const maxTries = 1000;
      let tries = 0;

      while (placedEyes.length < totalEyes && tries < maxTries) {
        const finalX = Math.random() * (window.innerWidth - eyeWidth);
        const finalY = Math.random() * (window.innerHeight - eyeHeight);

        const newRect = { x: finalX, y: finalY, width: eyeWidth, height: eyeHeight };

        const overlaps = placedEyes.some(rect => intersects(rect, newRect));
        const overlapsText = intersects(centerRect, newRect) || intersects(topRect, newRect);

        if (!overlaps && !overlapsText) {
          placedEyes.push(newRect);
          createEye(finalX, finalY);
        }

        tries++;
      }

      if (placedEyes.length < totalEyes) {
        console.warn(`Only placed ${placedEyes.length} eyes (max: ${totalEyes})`);
      }
    }

    function lookAtCenter() {
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;

      allEyes.forEach(({ iris, pupil, wrapper }) => {
        const eyeRect = wrapper.getBoundingClientRect();
        const eyeX = eyeRect.left + eyeRect.width / 2;
        const eyeY = eyeRect.top + eyeRect.height / 2;

        const dx = centerX - eyeX;
        const dy = centerY - eyeY;
        const angle = Math.atan2(dy, dx);

        const offset = 15; // how far the pupil shifts
        const xShift = Math.cos(angle) * offset;
        const yShift = Math.sin(angle) * offset;

        iris.style.transform = `translate(${xShift}px, ${yShift}px)`;
        pupil.style.transform = `translate(0, 0)`;
      });

      // After 5 seconds, fade everything out and show special eyes
      setTimeout(() => {
        document.body.classList.add('black-bg');
        container.classList.add('fade-out');
        text.classList.add('fade-out');
        
        // After fade out completes, show special eyes
        setTimeout(() => {
          specialEyes.style.opacity = '1';
          // Trigger opening animation for special eyes
          const specialEyeElements = document.querySelectorAll('.special-eye');
          specialEyeElements.forEach(eye => {
            eye.classList.add('open');
          });
        }, 1000);
      }, 5000);
    }

    window.addEventListener('resize', () => {
      if (openedEyes === totalEyes) lookAtCenter();
    });

    generateEyes();
    updateBlur();
  </script>
</body>
</html>